(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62746101"],{"99b5":function(o,t,e){"use strict";e.r(t);var s=function(){var o=this,t=o._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"follow__container row flex-nowrap"},[t("UserFollow")],1)])},i=[],n=function(){var o=this,t=o._self._c;return t("div",{staticClass:"user__follow__container"},[t("div",{staticClass:"user__follow__container__header d-flex"},[t("div",{staticClass:"user__follow__container__header__back cursor-pointer",on:{click:function(t){return o.$router.back()}}},[t("img",{attrs:{src:e("c9a6"),alt:""}})]),t("div",[t("div",{staticClass:"user__follow__container__header__user__name"},[o._v(" "+o._s(o.userName)+" ")]),t("div",{staticClass:"user__follow__container__header__tweet__count"},[o._v(" "+o._s(o.userTweetCount)+" 推文 ")])])]),t("div",{staticClass:"user__follow__container__tab d-flex"},[t("button",{staticClass:"user__follow__container__tab__followers",class:{active:"1"===this.$route.query.followType},on:{click:function(t){return o.toggleTab("followers")}}},[o._v(" 追隨者 ")]),t("button",{staticClass:"user__follow__container__tab__followings",class:{active:"2"===this.$route.query.followType},on:{click:function(t){return o.toggleTab("followings")}}},[o._v(" 正在追隨 ")])]),o.isLoading?t("Spinner"):t("div",{staticClass:"user__follow__container__content scrollbar"},[t("div",{directives:[{name:"show",rawName:"v-show",value:"1"===this.$route.query.followType,expression:"this.$route.query.followType === '1'"}]},[0===this.followers.length?t("div",{staticClass:"user__follow__container__no__content text-center"},[o._v(" 尚無追隨者 ")]):o._l(o.followers,(function(e){return t("div",{key:e.id,staticClass:"user__follow__container__content__followers d-flex"},[t("router-link",{attrs:{to:{name:"profile",params:{id:e.id}}}},[t("img",{staticClass:"user__follow__container__content__img",attrs:{src:o._f("emptyImage")(e.avatar),alt:""}})]),t("div",{staticClass:"user__follow__container__content__container"},[t("div",{staticClass:"user__follow__container__content__name__button d-flex justify-content-between"},[t("router-link",{staticClass:"user__follow__container__content__name none",attrs:{to:{name:"profile",params:{id:e.id}}}},[o._v(o._s(e.name))]),t("div",{directives:[{name:"show",rawName:"v-show",value:o.currentUser.id!==e.id,expression:"currentUser.id !== follower.id"}]},[0===e.isFollowed?t("button",{staticClass:"user__follow__container__content__add__button",attrs:{disabled:o.isProcessing},on:{click:function(t){return o.addFollowing(e.id)}}},[o._v(" 追隨 ")]):t("button",{staticClass:"user__follow__container__content__delete__button",attrs:{disabled:o.isProcessing},on:{click:function(t){return o.deleteFollowing(e.id)}}},[o._v(" 正在跟隨 ")])])],1),e.introduction?t("div",{staticClass:"user__follow__container__content__introduction"},[o._v(" "+o._s(e.introduction)+" ")]):t("div",{staticClass:"user__follow__container__content__no__introduction"},[o._v(" 尚無自我介紹 ")])])],1)}))],2),t("div",{directives:[{name:"show",rawName:"v-show",value:"2"===this.$route.query.followType,expression:"this.$route.query.followType === '2'"}]},[0===this.followings.length?t("div",{staticClass:"user__follow__container__no__content text-center"},[o._v(" 尚無正在追蹤的使用者 ")]):o._l(o.followings,(function(e){return t("div",{key:e.id,staticClass:"user__follow__container__content__followings d-flex"},[t("router-link",{attrs:{to:{name:"profile",params:{id:e.id}}}},[t("img",{staticClass:"user__follow__container__content__img",attrs:{src:o._f("emptyImage")(e.avatar),alt:""}})]),t("div",{staticClass:"user__follow__container__content__container"},[t("div",{staticClass:"user__follow__container__content__name__button d-flex justify-content-between"},[t("router-link",{staticClass:"user__follow__container__content__name none",attrs:{to:{name:"profile",params:{id:e.id}}}},[o._v(o._s(e.name))]),t("div",{directives:[{name:"show",rawName:"v-show",value:o.currentUser.id!==e.id,expression:"currentUser.id !== following.id"}]},[0===e.isFollowed?t("button",{staticClass:"user__follow__container__content__add__button",attrs:{disabled:o.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),o.addFollowing(e.id)}}},[o._v(" 追隨 ")]):t("button",{staticClass:"user__follow__container__content__delete__button",attrs:{disabled:o.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),o.deleteFollowing(e.id)}}},[o._v(" 正在跟隨 ")])])],1),e.introduction?t("div",{staticClass:"user__follow__container__content__introduction"},[o._v(" "+o._s(e.introduction)+" ")]):t("div",{staticClass:"user__follow__container__content__no__introduction"},[o._v(" 尚無自我介紹 ")])])],1)}))],2)])],1)},r=[],l=(e("14d9"),e("d9e2"),e("4cce")),a=e("8845"),_=e("2f62"),c=e("2375"),u=e("2708"),w=e("2fa3"),d={name:"UserFollow",mixins:[u["b"]],components:{Spinner:c["a"]},data(){return{userName:"",userTweetCount:0,followers:[],followings:[],isProcessing:!1,isLoading:!0}},created(){const{id:o}=this.$route.params;"1"!==this.$route.query.followType&&"2"!==this.$route.query.followType&&this.$router.push({name:"not-found"}),this.fetchFollowers(o),this.fetchFollowings(o),this.fetchUserName(o),this.fetchUserTweets(o)},methods:{async fetchUserTweets(o){try{this.isLoading=!0;const{data:t}=await l["a"].get.tweets({id:o});if("error"===t.status)throw new Error(t.message);this.userTweetCount=t.length,this.isLoading=!1}catch(t){this.isLoading=!1,console.log(t),w["a"].fire({icon:"error",title:"無法取得推文資料，請稍後再試"})}},async fetchUserName(o){try{this.isLoading=!0;const{data:t}=await l["a"].get.profile({id:o});if("error"===t.status)throw new Error(t.message);this.userName=t.name,this.isLoading=!1}catch(t){this.isLoading=!1,console.log(t),w["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"})}},async fetchFollowers(o){try{const{data:t}=await l["a"].get.followers({id:o});if("error"===t.status)throw new Error(t.message);this.followers=t.map(o=>({id:o.followerId,name:o.Followers.name,avatar:o.Followers.avatar,introduction:o.Followers.introduction,isFollowed:o.Followers.isFollowed})),this.isLoading=!1}catch(t){this.isLoading=!1,console.log(t),w["a"].fire({icon:"error",title:"無法取得追隨者資料，請稍後再試"})}},async fetchFollowings(o){try{const{data:t}=await l["a"].get.followings({id:o});if("error"===t.status)throw new Error(t.message);this.followings=t.map(o=>({id:o.followingId,name:o.Followings.name,avatar:o.Followings.avatar,introduction:o.Followings.introduction,isFollowed:o.Followings.isFollowed})),this.isLoading=!1}catch(t){this.isLoading=!1,console.log(t),w["a"].fire({icon:"error",title:"無法取得正在追隨的使用者資料，請稍後再試"})}},async addFollowing(o){try{this.isProcessing=!0;const{data:t}=await a["a"].addFollowing({id:o});if("error"===t.status)throw new Error(t.message);"1"===this.$route.query.followType?this.followers=this.followers.map(t=>t.id!==o?t:{...t,isFollowed:1}):"2"===this.$route.query.followType&&(this.followings=this.followings.map(t=>t.id!==o?t:{...t,isFollowed:1})),w["a"].fire({icon:"success",title:"追蹤成功！"});const{id:e}=this.$route.params;this.fetchFollowers(e),this.fetchFollowings(e),this.$store.commit("triggerPopularUsersRender"),this.isProcessing=!1}catch(t){this.isProcessing=!1,console.log(t),w["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"})}},async deleteFollowing(o){try{this.isProcessing=!0;const{data:t}=await a["a"].deleteFollowing({id:o});if("error"===t.status)throw new Error(t.message);"1"===this.$route.query.followType?this.followers=this.followers.map(t=>t.id!==o?t:{...t,isFollowed:0}):"2"===this.$route.query.followType&&(this.followings=this.followings.map(t=>t.id!==o?t:{...t,isFollowed:0})),w["a"].fire({icon:"success",title:"取消追蹤成功！"});const{id:e}=this.$route.params;this.fetchFollowers(e),this.fetchFollowings(e),this.$store.commit("triggerPopularUsersRender"),this.isProcessing=!1}catch(t){this.isProcessing=!1,console.log(t),w["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"})}},toggleTab(o){"followers"===o?this.$router.push({name:"follow",query:{followType:"1"}}):"followings"===o&&this.$router.push({name:"follow",query:{followType:"2"}})}},computed:{...Object(_["b"])(["currentUser","renderFollow"])},watch:{renderFollow:{handler:function(){const{id:o}=this.$route.params;this.fetchFollowers(o),this.fetchFollowings(o)},deep:!0},$route:{handler:function(){const{id:o}=this.$route.params;this.fetchFollowers(o),this.fetchFollowings(o)}}}},f=d,h=e("2877"),g=Object(h["a"])(f,n,r,!1,null,null,null),m=g.exports,p={name:"Follow",components:{UserFollow:m}},v=p,y=Object(h["a"])(v,s,i,!1,null,null,null);t["default"]=y.exports},c9a6:function(o,t,e){o.exports=e.p+"img/back.3406615e.svg"}}]);
//# sourceMappingURL=chunk-62746101.46e900ca.js.map