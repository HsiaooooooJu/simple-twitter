(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d191a782"],{be6c:function(t,e,s){"use strict";var i=s("2fa3");e["a"]={tweets:{get(){return i["b"].get("/tweets")},delete({tweetId:t}){return i["b"].delete("/admin/tweets/"+t)}},users:{get(){return i["b"].get("/admin/users")}}}},e02a:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"admin__container row flex-nowrap"},[e("AdminTweetCard")],1)])},n=[],a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"admin__tweet__container"},[e("div",{staticClass:"admin__tweet__container__title"},[t._v("推文清單")]),t.isLoading?e("Spinner"):e("div",{staticClass:"scrollbar"},t._l(t.tweets,(function(s){return e("div",{key:s.id,staticClass:"admin__tweet__container__tweets d-flex"},[e("img",{staticClass:"admin__tweet__container__tweets__image",attrs:{src:t._f("emptyImage")(s.User.avatar),alt:""}}),e("div",{staticClass:"admin__tweet__container__tweets__description"},[e("div",{staticClass:"d-flex justify-content-between"},[e("div",[e("span",{staticClass:"admin__tweet__container__tweets__description__name"},[t._v(" "+t._s(s.User.name)+" ")]),e("span",{staticClass:"admin__tweet__container__tweets__description__account"},[t._v(" "+t._s(t._f("atAccount")(s.User.account))+" ")]),e("span",{staticClass:"admin__tweet__container__tweets__description__dot"},[t._v("・")]),e("span",{staticClass:"admin__tweet__container__tweets__description__createdAt"},[t._v(" "+t._s(t._f("fromNow")(s.createdAt))+" ")])]),e("button",{staticClass:"admin__tweet__container__tweets__description__delete",attrs:{disabled:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteTweet(s.id)}}},[t._v(" × ")])]),e("div",{staticClass:"admin__tweet__container__tweets__description__content"},[t._v(" "+t._s(t._f("setEllipsis")(s.description))+" ")])])])})),0)],1)},r=[],_=(s("d9e2"),s("be6c")),c=s("2375"),o=s("2708"),d=s("2fa3"),l=s("3d20"),w=s.n(l),u={name:"AdminTweetCard",mixins:[o["b"],o["c"],o["a"]],components:{Spinner:c["a"]},data(){return{tweets:[],isProcessing:!1,isLoading:!1}},created(){this.fetchTweets()},methods:{async fetchTweets(){try{this.isLoading=!0;const{data:t}=await _["a"].tweets.get();if("error"===t.status)throw new Error(t.message);this.tweets=t,this.isLoading=!1}catch(t){this.isLoading=!1,console.log(t),d["a"].fire({icon:"error",title:"無法取得推文資料，請稍後再試"})}},async deleteTweet(t){try{this.isProcessing=!0;const e=await w.a.fire({icon:"warning",title:"刪除無法復原，確認刪除？",showCancelButton:!0,cancelButtonColor:"#50b5ff",cancelButtonText:"取消",confirmButtonColor:"#fc5a5a",confirmButtonText:"確認"});if(!e.isConfirmed)return void(this.isProcessing=!1);const{data:s}=await _["a"].tweets.delete({tweetId:t});if("error"===s.status)throw new Error(s.message);this.tweets=this.tweets.filter(e=>e.id!==t),d["a"].fire({icon:"success",title:"成功刪除回覆"}),this.isProcessing=!1}catch(e){this.isProcessing=!1,console.log(e),d["a"].fire({icon:"error",title:"無法刪除推文，請稍後再試"})}}},filters:{setEllipsis(t){const e=50;return t.length>e?t.slice(0,e)+"...":t}}},f=u,m=s("2877"),p=Object(m["a"])(f,a,r,!1,null,null,null),g=p.exports,h={name:"AdminTweetList",components:{AdminTweetCard:g}},v=h,C=Object(m["a"])(v,i,n,!1,null,null,null);e["default"]=C.exports}}]);
//# sourceMappingURL=chunk-d191a782.6f19e305.js.map