{"version":3,"sources":["webpack:///./src/apis/admin.js","webpack:///./src/views/AdminTweetList.vue","webpack:///./src/components/AdminTweetCard.vue","webpack:///src/components/AdminTweetCard.vue","webpack:///./src/components/AdminTweetCard.vue?fe0a","webpack:///./src/components/AdminTweetCard.vue?b5c9","webpack:///src/views/AdminTweetList.vue","webpack:///./src/views/AdminTweetList.vue?5513","webpack:///./src/views/AdminTweetList.vue?f38e"],"names":["tweets","get","apiHelper","delete","tweetId","users","render","_vm","this","_c","_self","staticClass","staticRenderFns","_v","isLoading","_l","tweet","key","id","attrs","_f","User","avatar","_s","name","account","createdAt","isProcessing","on","$event","stopPropagation","preventDefault","deleteTweet","description","mixins","components","Spinner","data","created","methods","console","Toast","icon","title","showCancelButton","cancelButtonColor","cancelButtonText","confirmButtonColor","confirmButtonText","filters","setEllipsis","component","AdminTweetCard"],"mappings":"gHAAA,gBAEe,QACbA,OAAQ,CAENC,MACE,OAAOC,OAAUD,IAAI,YAIvBE,QAAO,QAAEC,IACP,OAAOF,OAAUC,OAAQ,iBAAgBC,KAI7CC,MAAO,CAELJ,MACE,OAAOC,OAAUD,IAAI,oB,yCClB3B,IAAIK,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,oCAAoC,CAACF,EAAG,mBAAmB,MAEpLG,EAAkB,GCFlBN,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,MAAM,CAACE,YAAY,kCAAkC,CAACJ,EAAIM,GAAG,UAAWN,EAAIO,UAAWL,EAAG,WAAWA,EAAG,MAAM,CAACE,YAAY,aAAaJ,EAAIQ,GAAIR,EAAIP,QAAQ,SAASgB,GAAO,OAAOP,EAAG,MAAM,CAACQ,IAAID,EAAME,GAAGP,YAAY,0CAA0C,CAACF,EAAG,MAAM,CAACE,YAAY,yCAAyCQ,MAAM,CAAC,IAAMZ,EAAIa,GAAG,aAAPb,CAAqBS,EAAMK,KAAKC,QAAQ,IAAM,MAAMb,EAAG,MAAM,CAACE,YAAY,gDAAgD,CAACF,EAAG,MAAM,CAACE,YAAY,kCAAkC,CAACF,EAAG,MAAM,CAACA,EAAG,OAAO,CAACE,YAAY,sDAAsD,CAACJ,EAAIM,GAAG,IAAIN,EAAIgB,GAAGP,EAAMK,KAAKG,MAAM,OAAOf,EAAG,OAAO,CAACE,YAAY,yDAAyD,CAACJ,EAAIM,GAAG,IAAIN,EAAIgB,GAAGhB,EAAIa,GAAG,YAAPb,CAAoBS,EAAMK,KAAKI,UAAU,OAAOhB,EAAG,OAAO,CAACE,YAAY,qDAAqD,CAACJ,EAAIM,GAAG,OAAOJ,EAAG,OAAO,CAACE,YAAY,2DAA2D,CAACJ,EAAIM,GAAG,IAAIN,EAAIgB,GAAGhB,EAAIa,GAAG,UAAPb,CAAkBS,EAAMU,YAAY,SAASjB,EAAG,SAAS,CAACE,YAAY,uDAAuDQ,MAAM,CAAC,SAAWZ,EAAIoB,cAAcC,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,kBAAkBD,EAAOE,iBAAwBxB,EAAIyB,YAAYhB,EAAME,OAAO,CAACX,EAAIM,GAAG,WAAWJ,EAAG,MAAM,CAACE,YAAY,yDAAyD,CAACJ,EAAIM,GAAG,IAAIN,EAAIgB,GAAGhB,EAAIa,GAAG,cAAPb,CAAsBS,EAAMiB,cAAc,cAAa,IAAI,IAE7gDrB,EAAkB,G,iFC6DP,GACfY,sBACAU,8BACAC,YACAC,gBAEAC,OACA,OACArC,UACA2B,gBACAb,eAGAwB,UACA,oBAEAC,SACA,oBACA,IACA,kBAEA,WAAAF,SAAA,oBAEA,sBACA,2BAGA,cACA,kBACA,SACA,kBAEAG,eAEAC,aACAC,aACAC,2BAIA,qBACA,IACA,qBAEA,wBACAD,eACAC,qBACAC,oBACAC,4BACAC,sBACAC,6BACAC,yBAGA,kBAEA,YADA,sBAIA,WAAAX,SAAA,sBAAAjC,YAEA,sBACA,2BAGA,4CAEAqC,aACAC,eACAC,iBAGA,qBACA,SACA,qBAEAH,eAEAC,aACAC,aACAC,0BAKAM,SACAC,eACA,WAEA,kBACA,mBAGA,KC5JwV,I,YCOpVC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QCPA,GACf3B,sBACAW,YACAiB,mBCdwV,ICOpV,EAAY,eACd,EACA9C,EACAM,GACA,EACA,KACA,KACA,MAIa,e","file":"js/chunk-d191a782.6f19e305.js","sourcesContent":["import { apiHelper } from '../utils/helpers'\n\nexport default {\n  tweets: {\n    // 取得使用者的所有推文\n    get() {\n      return apiHelper.get('/tweets')\n    },\n\n    // 管理員刪除指定推文\n    delete({ tweetId }) {\n      return apiHelper.delete(`/admin/tweets/${tweetId}`)\n    }\n  },\n\n  users: {\n    // 取得使用者與管理員的個人資料\n    get() {\n      return apiHelper.get('/admin/users')\n    }\n  }\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"admin__container row flex-nowrap\"},[_c('AdminTweetCard')],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"admin__tweet__container\"},[_c('div',{staticClass:\"admin__tweet__container__title\"},[_vm._v(\"推文清單\")]),(_vm.isLoading)?_c('Spinner'):_c('div',{staticClass:\"scrollbar\"},_vm._l((_vm.tweets),function(tweet){return _c('div',{key:tweet.id,staticClass:\"admin__tweet__container__tweets d-flex\"},[_c('img',{staticClass:\"admin__tweet__container__tweets__image\",attrs:{\"src\":_vm._f(\"emptyImage\")(tweet.User.avatar),\"alt\":\"\"}}),_c('div',{staticClass:\"admin__tweet__container__tweets__description\"},[_c('div',{staticClass:\"d-flex justify-content-between\"},[_c('div',[_c('span',{staticClass:\"admin__tweet__container__tweets__description__name\"},[_vm._v(\" \"+_vm._s(tweet.User.name)+\" \")]),_c('span',{staticClass:\"admin__tweet__container__tweets__description__account\"},[_vm._v(\" \"+_vm._s(_vm._f(\"atAccount\")(tweet.User.account))+\" \")]),_c('span',{staticClass:\"admin__tweet__container__tweets__description__dot\"},[_vm._v(\"・\")]),_c('span',{staticClass:\"admin__tweet__container__tweets__description__createdAt\"},[_vm._v(\" \"+_vm._s(_vm._f(\"fromNow\")(tweet.createdAt))+\" \")])]),_c('button',{staticClass:\"admin__tweet__container__tweets__description__delete\",attrs:{\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteTweet(tweet.id)}}},[_vm._v(\" × \")])]),_c('div',{staticClass:\"admin__tweet__container__tweets__description__content\"},[_vm._v(\" \"+_vm._s(_vm._f(\"setEllipsis\")(tweet.description))+\" \")])])])}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"admin__tweet__container\">\n    <div class=\"admin__tweet__container__title\">推文清單</div>\n    <Spinner v-if=\"isLoading\" />\n    <div v-else class=\"scrollbar\">\n      <div\n        v-for=\"tweet in tweets\"\n        :key=\"tweet.id\"\n        class=\"admin__tweet__container__tweets d-flex\"\n      >\n        <img\n          class=\"admin__tweet__container__tweets__image\"\n          :src=\"tweet.User.avatar | emptyImage\"\n          alt=\"\"\n        />\n        <div class=\"admin__tweet__container__tweets__description\">\n          <div class=\"d-flex justify-content-between\">\n            <div>\n              <span class=\"admin__tweet__container__tweets__description__name\">\n                {{ tweet.User.name }}\n              </span>\n              <span\n                class=\"admin__tweet__container__tweets__description__account\"\n              >\n                {{ tweet.User.account | atAccount }}\n              </span>\n              <span class=\"admin__tweet__container__tweets__description__dot\"\n                >・</span\n              >\n              <span\n                class=\"admin__tweet__container__tweets__description__createdAt\"\n              >\n                {{ tweet.createdAt | fromNow }}\n              </span>\n            </div>\n            <button\n              class=\"admin__tweet__container__tweets__description__delete\"\n              :disabled=\"isProcessing\"\n              @click.stop.prevent=\"deleteTweet(tweet.id)\"\n            >\n              ×\n            </button>\n          </div>\n          <div class=\"admin__tweet__container__tweets__description__content\">\n            {{ tweet.description | setEllipsis }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport adminAPI from '../apis/admin'\nimport Spinner from '../components/Spinner.vue'\nimport {\n  emptyImageFilter,\n  fromNowFilter,\n  atAccountFilter\n} from '../utils/mixins'\nimport { Toast } from '../utils/helpers'\nimport Swal from 'sweetalert2'\n\nexport default {\n  name: 'AdminTweetCard',\n  mixins: [emptyImageFilter, fromNowFilter, atAccountFilter],\n  components: {\n    Spinner\n  },\n  data() {\n    return {\n      tweets: [],\n      isProcessing: false,\n      isLoading: false\n    }\n  },\n  created() {\n    this.fetchTweets()\n  },\n  methods: {\n    async fetchTweets() {\n      try {\n        this.isLoading = true\n\n        const { data } = await adminAPI.tweets.get()\n\n        if (data.status === 'error') {\n          throw new Error(data.message)\n        }\n\n        this.tweets = data\n        this.isLoading = false\n      } catch (error) {\n        this.isLoading = false\n\n        console.log(error)\n\n        Toast.fire({\n          icon: 'error',\n          title: '無法取得推文資料，請稍後再試'\n        })\n      }\n    },\n    async deleteTweet(tweetId) {\n      try {\n        this.isProcessing = true\n\n        const result = await Swal.fire({\n          icon: 'warning',\n          title: '刪除無法復原，確認刪除？',\n          showCancelButton: true,\n          cancelButtonColor: '#50b5ff',\n          cancelButtonText: '取消',\n          confirmButtonColor: '#fc5a5a',\n          confirmButtonText: '確認'\n        })\n\n        if (!result.isConfirmed) {\n          this.isProcessing = false\n          return\n        }\n\n        const { data } = await adminAPI.tweets.delete({ tweetId })\n\n        if (data.status === 'error') {\n          throw new Error(data.message)\n        }\n\n        this.tweets = this.tweets.filter((tweet) => tweet.id !== tweetId)\n\n        Toast.fire({\n          icon: 'success',\n          title: '成功刪除回覆'\n        })\n\n        this.isProcessing = false\n      } catch (error) {\n        this.isProcessing = false\n\n        console.log(error)\n\n        Toast.fire({\n          icon: 'error',\n          title: '無法刪除推文，請稍後再試'\n        })\n      }\n    }\n  },\n  filters: {\n    setEllipsis(value) {\n      const len = 50\n\n      if (value.length > len) {\n        return value.slice(0, len) + '...'\n      }\n\n      return value\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweetCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweetCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminTweetCard.vue?vue&type=template&id=027b17ce&\"\nimport script from \"./AdminTweetCard.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminTweetCard.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"container\">\n    <div class=\"admin__container row flex-nowrap\">\n      <AdminTweetCard />\n    </div>\n  </div>\n</template>\n\n<script>\nimport AdminTweetCard from '../components/AdminTweetCard.vue'\n\nexport default {\n  name: 'AdminTweetList',\n  components: {\n    AdminTweetCard\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweetList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweetList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminTweetList.vue?vue&type=template&id=870e6268&\"\nimport script from \"./AdminTweetList.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminTweetList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}